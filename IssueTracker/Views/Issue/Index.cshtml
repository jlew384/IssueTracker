@using System.Security.Claims;
@using IssueTracker.Helpers;
@model IssueIndexViewModel

@{
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <div class="d-flex align-items-center">
        <h1 class="display-4">@Model.ProjectTitle</h1>
        <select class="issue-filter-dropdown form-select mx-3" asp-for="@Model.Filter" asp-items="@new SelectList(IssueFilter.LIST)"></select>
    </div>
    <div>
        <a class="btn btn-primary" asp-action="Create" asp-controller="Issue" asp-route-pid="@Model.ProjectId">Create Issue</a>
    </div>
    
</div>


<div class="issue-list-container">
    @await Component.InvokeAsync("IssueTable", 
        new {
            userId = Model.UserId,
            projectId = Model.ProjectId,
            filter = Model.Filter,
            sortField = Model.SortField,
            sortDirection = Model.SortDirection
        })
</div>
